<!doctype html>
<html lang="fr">
    
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>{{title}}</title>
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">        
        <link rel="stylesheet" href="resources/css/page.css?v=1">
        <!--[if lt IE 9]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
       
        <script>    
            function initialize() {
                var map_canvas = document.getElementById('map_canvas');
                var myLatlng = new google.maps.LatLng(43.209236, 5.628851);
                var map_options = {
                  center: myLatlng,
                  zoom: 15,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  scrollwheel: false 
                };
                var map = new google.maps.Map(map_canvas, map_options);
                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: '{{title}}'
                });
            }
            google.maps.event.addDomListener(window, 'load', initialize);
            
            $(document).ready(function(){                
                $body = $(document.body);
                $allPizzaSections = $body.find("section.section-pizza")
                
                $("a[href^='#']").on('click', function(e) {
                    // prevent default anchor click behavior
                    e.preventDefault();
                    // animate
                    go (this.hash);
                });
            });
        
            var go = function  (hash){
                var offset = $(hash).offset();
                if (!!offset){
                    $('html, body').animate({
                        scrollTop: offset.top
                    }, 1100, function(){
                        window.location.hash = hash;
                    });
                }
            };

            var pUp = function (node, event){
                var $prevs = $(node).parents('section').prevAll('*[id]');
                var scrollTop = $(document).scrollTop();
                var prevSectionId; 
                for (var i=0; i < $prevs.length; ++i){
                    var offset = $($prevs.get(i)).offset();
                    if (!!!offset){
                        continue;
                    }
                    var nTop = $($prevs.get(i)).offset().top;
                    if (nTop == scrollTop){
                        continue;
                    }
                    prevSectionId = $prevs.get(i).id;
                    break;
                }                    
                event.preventDefault();
                if (prevSectionId){                
                    go('#'+prevSectionId);    
                }
            };

            var pDown = function (node, event){
                var prevSectionId = $(node).parents('section').nextAll('*[id]:first').attr('id');
                event.preventDefault();
                go('#'+prevSectionId);
            };
           
        </script>
        <style>
            
            {{#each menu}}
            .wrap-pizza.wrap-{{type}}{
                background-image: url(resources/images/{{type}}.jpg) ;
            }
            {{/each}}
            
        </style>
    </head>
    
    <body>
        <div class="fixed-header navbar navbar-fixed-top ">
            <div class="container">
                <div class="row">
                    <div class="tel col-sm-5 col-xs-12">
                        <a href="tel:{{tel}}">{{displayTel}}</a>
                    </div>
                    <div class="info col-sm-7 hidden-xs">
                        <p><a href="#map">{{address}}</a></p>
                        <p>{{date}}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <section id="top" >
            <div class="wrap wrap-header">
                <header class="clearfix">
                    <div class="row">
                        <div class="col-md-3 hidden-sm"> </div>
                        <div class="col-md-6 col-sm-12">
                           <h1>{{title}}</h1>
                        </div>
                        <div class="col-md-3 hidden-sm">
                            <div class="wood">
                             <dl>
                                <dt>Nos pizzas</dt>
                                <dd>
                                    <ul class="list-unstyled">
                                    {{#each menu}}
                                        {{#if shortTitle}}
                                        <li><a href="#{{type}}">{{shortTitle}}</a></li>
                                        {{else}}
                                        <li><a href="#{{type}}">{{title}}</a></li>
                                        {{/if}}
                                    {{/each}}
                                    </ul>
                                </dd>
                            </dl>
                            </div>
                        </div>
                    </div>
                </header>
                <hgroup>
                    <h2>{{subtitle}}</h2>
                    <h3>{{description}}</h3> 
                    <p>{{date}}</p>
                    <p class="address"><a href="#map">{{address}}</a></p>
                    <p>{{tips}}</p>
                </hgroup>
            </div>
            <div class="separator" >
                <h3>{{description2}}</h3>
            </div>
        </section>
        {{#each menu}}
        <section id ="{{type}}" class="section-pizza">
            <div class="wrap wrap-pizza wrap-{{type}} hidden-xs">
                <header class="clearfix">
                    <div class="container">
                    <div class="row hidden-xs">
                        <div class="col-xs-10">
                        </div>
                        <div class="col-xs-2 pagination">
                            <div class="pagination-arrow">
                                <a href="#" onclick="pUp(this, event)"><i class="fa fa-chevron-circle-up fa-4x"></i></a>
                            </div>
                            <div class="pagination-arrow">
                                <a href="#" onclick="pDown(this, event)"><i class="fa fa-chevron-circle-down fa-4x"></i></a>
                            </div>
                        </div>    
                    </div>
                    </div>
                </header>
            </div>
            <div class="container pizzas pizzas-{{type}}">
                <h3>{{title}}</h3>
                {{#each pizzas}}
                <div>
                <div class="pizza hidden-xs row">
                    <p class="tel col-xs-10">
                        <span class="name">{{name}}</span>
                        {{#if description}}
                        <span class="description">({{description}})</span>
                        {{/if}}
                    </p>
                    <p class="tel col-xs-2">
                        <span class="price">{{price}}</span>
                    </p>
                </div>
                <div class="pizza visible-xs">
                    <p>
                        <span class="name">{{name}}</span> - <span class="price">{{price}}</span>
                    </p>
                    <p>
                        <span class="description">{{description}}</span>
                    </p>
                    <hr />
                </div>
                    </div>
                {{/each}}
            </div>
        </section>
        {{/each}}
          <section>
            <div class="wrap wrap-camion  hidden-xs">
                <header class="clearfix">
                    <div class="container">
                    <div class="row hidden-xs">
                        <div class="col-xs-10">
                        </div>
                        <div class="col-xs-2 pagination">
                            <div class="pagination-arrow">
                                <a href="#top" ><i class="fa fa-chevron-circle-up fa-4x"></i></a>
                            </div>
                        </div>    
                    </div>
                    </div>
                </header>
            </div>
        </section>
        <secion id="map">
            <div id="map_canvas"></div>
        </secion>
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-xs-5 social-bar">

                            <a href="#top">{{title}}</a>
                            <a href="{{facebook}}"><i class="fa fa-social fa-facebook"></i></a>
                            <a href="{{google}}"><i class="fa fa-social fa-google-plus"></i></a>

                    </div>
                    <div class="col-xs-7 info">
                        <p>{{description}}</p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
